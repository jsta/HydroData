---
title: "Defining a HydroData AOI"
author: "Mike Johnson"
date: "4/12/2018"
output: html_document
---

```{r, include = F}
#file.remove(tempdir())

devtools::load_all(".")
library(dismo)
library(dataRetrieval)

```

HydroData is an R package that lets user find and get earth systems data for an area of interest (AOI). The core user inputs then are their AOI. HydroData offers three paramaters that allow users to define an area of interest according to a state, county, bounding box, or input spatial file. The following document provides example on how to use these parameters to define an AOI for data extraction:

### Defining an AOI by state name 

```{r}
CA = getAOI(state = 'CA')

leaflet() %>% addProviderTiles(providers$CartoDB.Positron) %>% addPolygons(data = CA,fillColor = "red", color = 'black', weight = .1)


```

Multiple States can be selected:

```{r}
WestCoast = getAOI(state = c("Oregon", "Washington", "CA"))

leaflet() %>% addProviderTiles(providers$CartoDB.Positron) %>% addPolygons(data = WestCoast,fillColor = "transparent", color = "black", weight = 4)

```

Selection by County

```{r}
SB = getAOI(state = "CA", county = "Santa Barbara")

leaflet() %>% addProviderTiles(providers$CartoDB.Positron) %>% addPolygons(data = SB,fillColor = "transparent", color = "black", weight = 4)

```

Selecting Multiple Counties

```{r}
centralCoast = getAOI(state ="CA", county = c("Santa Barbara", "San Luis Obispo", "Ventura"))

leaflet() %>% addProviderTiles(providers$CartoDB.Positron) %>% addPolygons(data = centralCoast,fillColor = "transparent", color = "black", weight = 4)

```



Using Clip Unit

Clip unit has five potetnial inputs (1) Location (2) Bounding box height (miles) (3) Boundign box width (miles) (4) location origin
The first three of these are required while the fourth is optional with a default of center. These will be covered in the following examples: 

## (1) Location

Location can be defined by a name or lat long pair

Grand Canyon Example 

```{r}
GC = getAOI(clip_unit = list("grand canyon", 10, 10))

leaflet() %>% addProviderTiles(providers$CartoDB.Positron) %>% addPolygons(data = GC,fillColor = "transparent", color = "black", weight = 4)


GC = getAOI(clip_unit = list(36.0544, -112.1401, 10, 10))

leaflet() %>% addProviderTiles(providers$CartoDB.Positron) %>% addPolygons(data = GC,fillColor = "transparent", color = "black", weight = 4)
```


## Bounding box

The next two values needed are a bounding box height and width where the first entery relates to height and the second relates to width: 

```{r}
ucsb.tall = getAOI(clip_unit = list("UCSB", 30, 10))

leaflet() %>% addProviderTiles(providers$CartoDB.Positron) %>% addPolygons(data = ucsb.tall,fillColor = "transparent", color = "black", weight = 4)


ucsb.wide = getAOI(clip_unit = list("UCSB", 10, 30))

leaflet() %>% addProviderTiles(providers$CartoDB.Positron) %>% addPolygons(data = ucsb.wide, fillColor = "transparent", color = "black", weight = 4)
```

### By User Shapefile

```{r}
LA = rgdal::readOGR("/Users/mikejohnson/Documents/GitHub/Communities1/Communities.shp")
SM = LA[LA$LABEL_CITY == 'Santa Monica',] %>% spTransform(HydroDataProj)

leaflet() %>% addProviderTiles(providers$CartoDB.Positron) %>% addPolygons(data = SM,fillColor = "transparent", color = "black", weight = 4)

```



The final argument is the how the location is used to draw the bounding box of a specified size. The options include 'center' , 'lowerleft', 'lowerright', 'upperleft', 'upperright':


```{r}
nwc.c = getAOI(clip_unit =  list("National Water Center, AL", 10, 10, "center"))
nwc.ul = getAOI(clip_unit = list("National Water Center, AL", 10, 10, "upperleft"))
nwc.ur = getAOI(clip_unit = list("National Water Center, AL", 10, 10, "upperright"))
nwc.ll = getAOI(clip_unit = list("National Water Center, AL", 10, 10, "lowerleft"))
nwc.lr = getAOI(clip_unit = list("National Water Center, AL", 10, 10, "lowerright"))
nwc = dismo::geocode("national water center, al")

leaflet() %>% addProviderTiles(providers$CartoDB.Positron) %>% 
  addPolygons(data = nwc.c,  fillColor = "red", color = "black", weight = 4) %>% 
  addPolygons(data = nwc.ul, fillColor = "blue", color = "black", weight = 4) %>% 
  addPolygons(data = nwc.ur, fillColor = "green", color = "black", weight = 4) %>% 
  addPolygons(data = nwc.ll, fillColor = "yellow", color = "black", weight = 4) %>% 
  addPolygons(data = nwc.lr, fillColor = "orange", color = "black", weight = 4) %>% 
  addMarkers(lat = nwc$latitude[1], lng = nwc$longitude[1])
```




