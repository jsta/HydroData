---
pagetitle: HydroData for R
---

```{r echo = FALSE, results='hide', warning=FALSE,message=FALSE}
devtools::load_all()
col  = '#1fb28a'
col1 = '#212f3f'
```

## The HydroData object

All `HydroData` **find** and **get** functions return objects of class `HydroData`. This page covers the key components of this class which, at its core, is a list of features related to the query defining the object. All objects range is size from 4 to 9 elements and include (1) metadata (2) data (3) ancillary elements.

### Getting a HydroData Object

In this example, we query a `HydroData` object for all USGS stations within a 100 square mile (10 by 10 miles) region centered on UCSB. If you haven't reviewed how AOI queries are defined  I suggest first skimming the [Defining an AOI](aoi.html) page. 

<br>

Query the `HydroData` Object:

```{r, message = FALSE}
usgs = findUSGS(clip_unit = list("UCSB", 10, 10), basemap = TRUE, boundary = TRUE, ids = T)
```

### Metadata

All `HydroData` objects include core metadata:

* An AOI Description (*default*)
* The source of the data (*default*)
* A projection CRS object (*default* if spatial) 
* A time period (*default* if Observation)
* Parameter list (*default* if Observation)

The **name** element of a `HydroData` object contains a plain-English text string describing the location of the AOI. 

```{r}
usgs$name
```

<br> 

The **source** element contains a text string describing the source of the data.

```{r}
usgs$source
```

If the `HydroData` object contains `spatial` or `raster` data, a **proj** element will be added.

```{r}
usgs$proj
```

However, if the `HydroData` object contains observation data (`data.frame`), a **timespane** and **param** element will be added detailing the time period and parameters contained in the object.

### Data

The data element holds the actual data queried and can be in the form of a `data.frame`, `sp`, or `raster` object.

```{r}
str(usgs$nwis, max = 2)
```

```{r, echo = FALSE}

icon.b <- makeAwesomeIcon(icon = 'home', iconColor = col,  markerColor = 'gray')
leaflet(option=leafletOptions(zoomControl= FALSE, minZoom = 13, maxZoom = 13)) %>% 
  addProviderTiles(providers$CartoDB.Positron) %>%
    addAwesomeMarkers(icon = icon.b, lat = usgs$nwis$lat_reachCent , lng = usgs$nwis$lon_reachCent)

```

### Ancillary Elements

Four ancillary elements can be added to a `HydroData` query using the optional function parameters thees include:

* A basemap
* An AOI shapefile 
* A shapefile of intersecting counties
* Critical station IDs/names

If `basemap = TRUE` in any function, a basemap will be added to the `HydroData` object. Four different map types can be added depending on what `basemap =` is set to.

  * 't': a terrain imagery basemap (Default if `basemap = TRUE`)
  * 's': a satellite imagery basemap (eg `basemap = 's'`)
  * 'h': a hybrid imagery basemap
  * 'r': a road map basemap
  
<br>
  
The basemap will be indexed under **basemap** and an example of each type can be seen below:

<br>
<left>
<a ><img alt = '' width='800' src='img/basemaps.png' /></a>
</left>
<br>
<br>

If `boundary = TRUE`, a shapefile of the AOI and a shapefile of the intersecting counties will be added (*if differenet*). The AOI shapefile is stored under the **boundary** element,

```{r}
usgs$boundary
```

```{r, echo = FALSE}
leaflet(option=leafletOptions(zoomControl= FALSE, minZoom = 10, maxZoom = 10)) %>% addProviderTiles(providers$CartoDB.Positron) %>% addPolygons(data = usgs$boundary,fillColor = col, color = col1, weight = 3)
```

<br>

and the intersecting county, or fiat boundaries, are stored under the **fiat** element.

```{r}
usgs$fiat
```

```{r, echo = FALSE}
leaflet(option=leafletOptions(zoomControl= FALSE, minZoom = 7, maxZoom = 7)) %>% addProviderTiles(providers$CartoDB.Positron) %>% addPolygons(data = usgs$fiat,fillColor = col, color = col1, weight = 3)
```

<br>

Finally if `ids = TRUE` then the key identifiers for each element will be stored. For example, in a USGS station `HydroData` object, the gage IDs will be stored. Primarily this layer is to provide easier access to identifying features for use in [get observatio function](get_tab.html).

```{r}
usgs$ids
```

### Overall 

The complete structure of this example `HydroData` object can be seen using `str()` and in total, the complete object is 12.7 MB.

```{r}
str(usgs, max = 1)
```

### Next Steps

After understanding what a `HydroData` object is, and what it can store/query, I suggest checking out how queries can be built for [Finding Observation Station](find.html), [Getting Observation data](get_tab.html),  [Getting Vector data](get_vec.html), and [Getting Raster Data](get_rast.html).
