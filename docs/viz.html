<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>HydroData for R</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->





<style type="text/css">
  body {
    padding-top: 20px;
  }
  .navbar-brand {
    font-weight: bold;
  }
  footer {
    border-top: 1px solid #CCC;
    margin-top: 60px;
    margin-bottom: 48px;
    opacity: 0.75;
  }
  .content-body>:first-child, .content-body>:first-child>:first-child {
    margin-top: 0 !important;
  }
  p code {
    white-space: inherit;
  }
  .leaflet-container {
    margin: 0 0 10.5px;
  }
</style>

<div class="fluid-row">
  <div class="col-sm-12">
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <a class="navbar-brand" href="./">HydroData for R</a>
        </div>
      </div>
    </nav>
  </div>
</div>

<div class="fluid-row">
  <div class="col-sm-3">
    <div class="list-group">
      <a class="list-group-item" href="./">Introduction</a>
      <a class="list-group-item" href="aoi.html">Defining an AOI</a>
      <a class="list-group-item" href="hydrodata.html">The HydroData Object</a>
      <a class="list-group-item" href="find.html">Find Stations</a>
      <a class="list-group-item" href="get_tab.html">Get Observation Data</a>
      <a class="list-group-item" href="get_vec.html">Get Vector Data</a>
      <a class="list-group-item" href="get_rast.html">Get Raster Data</a>
      <a class="list-group-item" href="viz.html">Visualize</a>
      <a class="list-group-item" href="save.html">Save & Export</a>
      <a class="list-group-item" href="sources.html">Sources</a>
     
    </div>
    <script>
      // manage active state of toc based on current page
      var href = window.location.pathname;
      href = href.substr(href.lastIndexOf('/') + 1);
      if (href === "" || href === "index.html")
        href = "./";
      $('a.list-group-item[href="' + href + '"]').addClass('active');
    </script>
  </div>
  <div class="col-sm-9 content-body">

<div class="fluid-row" id="header">




</div>


<div id="visualize-data" class="section level2">
<h2>Visualize Data</h2>
<p><code>HydroData</code> offers two functions for visualizing – and interacting with – spatial and observation data. These are <code>explore</code> and <code>inspect</code>. This page walks through these functions and the features available in each.</p>
<div id="exploring-spatial-data" class="section level3">
<h3>Exploring Spatial Data</h3>
<p>For this example we will use the <code>explore</code> function to interactivly view the NHD river network and availble USGS stations within a 2,500 square mile region centered on Cheyenne Mountain High School in Colorado Springs, Colorado.</p>
<p>To do this, we first define the Area of Interest:</p>
<pre class="r"><code>case_study =  list(&quot;Cheyenne Mountain High School&quot;, 50, 50)</code></pre>
<p>Next, we query a <code>HydroData</code> object for the NHD network and the USGS stations within this AOI:</p>
<pre class="r"><code>nhd = findNHD(clip_unit = case_study)
usgs = findUSGS(clip_unit = case_study)</code></pre>
<p>To get a better sense of the data available in these objects we call the <code>explore</code> function. <code>Explore</code> generates a leaflet map of the data showing the location, key features, and distirbution of spatial data. Such visualizations can helpful for station disovery, and better understanding an AOI. <code>Explore</code> can take either a single <code>HydroData</code> object OR a list of <code>HydroData</code> objects as input. All inputs will be included in the leaflet map generated.</p>
<pre class="r"><code>explore(input = list(nhd,usgs))</code></pre>
<p>Each <code>explore</code> map contains a set of features useful for discovery:</p>
<p>The first of these is that each <code>HydroData</code> data type has a predefined symbololgy and information set that is relevant to that featrure. Hovering/clicking on each element reveals this information. In the example here, each NHD reach is labeled with it colloquail name (when avaialble) and its COMID which can be used in querying National Water Model results. Each USGS station is indentified by the USGS logo, and displys information relating to it site number, corresponding NHD COMID, and site name. Additonally each ID number is linked to the stations main NWIS page.</p>
<br> <br>
<center>
<a ><img alt = '' width='800' src='img/labels.gif' /></a>
</center>
<p><br> <br></p>
<p>Each <code>explore</code> map also gives the user the abilty to locate themselves within a larger context via a mini-map in the lower right-hand corner as well as the ability to switch between basemap layers and toggle on and off HydroData object layers:</p>
<br> <br>
<center>
<a ><img alt = '' width='800' src='img/sidebars.gif' /></a>
</center>
<p><br> <br></p>
<p>Fianlly, via leaflet, explore maps allow users to identify locations via lat/long, and measure distances and areas. These tools are helpful when identifying closest stations, looking to refine an AOI query or when trying to get a better grasp on the spatial properties of a feature set:</p>
<br> <br>
<center>
<a ><img alt = '' width='800' src='img/measure.gif' /></a>
</center>
<p><br> <br></p>
</div>
<div id="inspecting-temporal-data" class="section level3">
<h3>Inspecting Temporal Data</h3>
<p><code>HydroData</code> was not only designed to collect and visualize spatial data, but also temporal, observation data. If you haven’t yet checked out the page on <a href="get_tab.html">getting observation data</a> I suggest doing so! To help make sense of this observation data <code>HydroData</code> offers the <code>inspect</code> function. As an example lets say you are interested in the average wind speeds near Denver, Colorado in 2016. We know WeatherUnderground Stations record this data so we can query an airport <code>HydroData</code> object for this AOI with appended IDs:</p>
<pre class="r"><code>ap = findAirports(clip_unit = list(&quot;Denver, CO&quot;, 50, 50), ids = T)
ap$ids</code></pre>
<pre><code>## [1] &quot;KBKF&quot; &quot;KDEN&quot; &quot;KAPA&quot; &quot;KBJC&quot; &quot;KBDU&quot; &quot;KFTG&quot;</code></pre>
<p>Doing so reveals the ICOA code for Denver International Airport is ‘KDEN’. Using this ID, we can get observation meterologic data using the <code>getWU()</code> function and specifing the year of interest as 2016.</p>
<pre class="r"><code>met = getWU(IDs = &quot;KDEN&quot;, year = 2016)</code></pre>
<p><code>Inspect</code> generates a dygraphs, interactive timeseries plot for input data. Such visualizations can be helpful identifying patterns and selecting years of interest. To run, <code>inspect</code> requiers a <code>HydroData</code> observation object and a parameter to plot. The parameter entered must match a column name in the input data set. The <code>names</code> function can be used to see these:</p>
<pre class="r"><code>names(met)</code></pre>
<pre><code>##  [1] &quot;Date&quot;      &quot;Year&quot;      &quot;Month&quot;     &quot;Day&quot;       &quot;T_max&quot;    
##  [6] &quot;T_avg&quot;     &quot;T_min&quot;     &quot;DP_max&quot;    &quot;DP_avg&quot;    &quot;DP_min&quot;   
## [11] &quot;H_max&quot;     &quot;H_avg&quot;     &quot;H_min&quot;     &quot;SLP_max&quot;   &quot;SLP_avg&quot;  
## [16] &quot;SLP_min&quot;   &quot;V_max&quot;     &quot;V_avg&quot;     &quot;V_min&quot;     &quot;Wind_max&quot; 
## [21] &quot;Wind_avg&quot;  &quot;Wind_min&quot;  &quot;PPT_tot&quot;   &quot;Events&quot;    &quot;agency_cd&quot;
## [26] &quot;site_no&quot;</code></pre>
<p>Of these options we are interest in the average wind speed , “Wind_avg”, which can be used for the <code>param</code> input for the inspect plot. Running this code will generate an interactive time series plot which contains a set of useful features:</p>
<p>The first is that each inspect plot is autogenerated with the correct axis labels and titles for the selected parameter. Additionally, scrolling over the timeseries reveals the data date and value. Draggin a box over a region of the plot will zoom in to that area for closer inspection:</p>
<pre class="r"><code>inspect(met, param = &quot;Wind_avg&quot;)</code></pre>
<br> <br>
<center>
<a ><img alt = '' width='800' src='img/daily.gif' /></a>
</center>
<p><br> <br></p>
<p>Data can be also aggregated to coarser time slices using the <code>timestep</code> parameter. For example the daily wind data can be plotted as a monthly values:</p>
<pre class="r"><code>inspect(met, param = &quot;Wind_avg&quot;, timestep = &quot;monthly&quot;)</code></pre>
<br> <br>
<center>
<a ><img alt = '' width='800' src='img/monthly.gif' /></a>
</center>
<p><br> <br></p>
</div>
</div>
<div id="sharing-viualizations" class="section level2">
<h2>Sharing Viualizations</h2>
<p>Both <code>explore</code> and <code>inspect</code> objects can be exported as a raw HTML object using the parameter <code>save = TRUE</code></p>
<pre class="r"><code>inspect(met, param = &quot;Wind_avg&quot;, timestep = &quot;monthly&quot;, save = TRUE)</code></pre>
<p>Doing so, will create a <code>HydroData</code> directory within you working directory. In this there will be a sub folder called ‘viz’ where all <code>explore</code> and <code>inspect</code> objects will be saved. These are usefult when you wish to share data with others, or reference data interactivly latter on.</p>
<p>To learn more about saveing/export <code>HydroData</code> features please see the <a href="save.html">Saving&amp;Exporting</a> page.</p>
</div>

<footer>
<p><small>The "HydroData" R package is written by <a href="http://mikejohnson51.github.io">Mike Johnson</a>,  2018.<br/>
Graduate Student at <a href="https://geog.ucsb.edu">University of California, Santa Barbara</a> in <a href="http://www.geog.ucsb.edu/~kclarke/">Keith C. Clarke's Lab</a> 
</small></p>
</footer>

  </div>
</div>

<a href="https://github.com/mikejohnson51/HydroData"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
